<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Owncast - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0; padding: 20px;
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #f0f0f0;
            text-align: center;
            line-height: 1.6;
            min-height: 100vh;
        }
        .container {
            max-width: 900px; margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
        }
        h3 { margin: 0 0 25px 0; color: #4FC3F7; font-size: 1.8em; }
        .server-info {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #4FC3F7;
            text-align: right;
        }
        .info-title {
            color: #4FC3F7;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        .info-box {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            word-break: break-all;
            border: 1px solid #37474F;
        }
        .copy-btn {
            background: linear-gradient(45deg, #FF9800, #F57C00);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
            transition: all 0.3s ease;
        }
        .copy-btn:hover { transform: translateY(-2px); opacity: 0.9; }
        .controls {
            margin: 25px 0; display: flex;
            flex-wrap: wrap; justify-content: center;
            gap: 15px;
        }
        button {
            padding: 16px 28px; margin: 5px;
            font-size: 16px; font-weight: bold; border: none;
            border-radius: 50px; cursor: pointer;
            transition: all 0.3s ease;
            display: flex; align-items: center;
            justify-content: center; min-width: 180px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        button:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.4); }
        #btnDevices { background: linear-gradient(45deg, #FF9800, #F57C00); color: #fff; }
        #btnTest { background: linear-gradient(45deg, #9C27B0, #7B1FA2); color: #fff; }
        #btnWatch { background: linear-gradient(45deg, #4CAF50, #2E7D32); color: #fff; }
        #btnAdmin { background: linear-gradient(45deg, #2196F3, #0D47A1); color: #fff; }
        #status {
            margin: 20px auto; padding: 15px;
            background: rgba(33, 150, 243, 0.1);
            border-radius: 10px; border-right: 5px solid #2196F3;
            font-size: 1.1em; min-height: 24px;
        }
        #localVideo {
            width: 100%; max-width: 640px; height: auto;
            background: #000; border-radius: 12px;
            border: 3px solid #37474F; margin: 15px auto;
            display: block; transform: scaleX(-1);
        }
        .footer { margin-top: 30px; color: #AAA; font-size: 0.9em; }
        .instructions {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            margin: 25px 0;
            text-align: right;
            border-right: 5px solid #FF9800;
        }
        .instructions h4 { color: #FF9800; margin-top: 0; }
        .instructions ol { padding-right: 20px; }
        .instructions li { margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h3>ğŸ¥ Ù…Ù†ØµØ© Owncast - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h3>
        
        <div class="server-info">
            <div class="info-title">ğŸ› ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</div>
            <div class="info-box" id="serverUrlBox">
                <strong>Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ±:</strong><br>
                https://tech-app-hpk5.onrender.com
                <button class="copy-btn" onclick="copyToClipboard('https://tech-app-hpk5.onrender.com')">
                    ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·
                </button>
            </div>
            <div class="info-box" id="rtmpBox">
                <strong>Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨Ø« (RTMP) Ù„Ù„ØªØ·Ø¨ÙŠÙ‚:</strong><br>
                rtmp://tech-app-hpk5.onrender.com/live
                <button class="copy-btn" onclick="copyToClipboard('rtmp://tech-app-hpk5.onrender.com/live')">
                    ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·
                </button>
            </div>
            <div class="info-box" id="streamKeyBox">
                <strong>Ù…ÙØªØ§Ø­ Ø§Ù„Ø¨Ø« (Stream Key):</strong><br>
                <span id="streamKeyText">your_stream_key_here</span>
                <button class="copy-btn" onclick="copyToClipboard(document.getElementById('streamKeyText').innerText)">
                    ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ù…ÙØªØ§Ø­
                </button>
            </div>
        </div>

        <div class="instructions">
            <h4>ğŸ“± ÙƒÙŠÙÙŠØ© Ø§Ù„Ø¨Ø« Ù…Ù† ØªØ·Ø¨ÙŠÙ‚ Android:</h4>
            <ol>
                <li>Ø§Ø³ØªØ®Ø¯Ù… Ù…ÙƒØªØ¨Ø© Ù…Ø«Ù„ <code>rtmp-rtsp-stream-client-java</code></li>
                <li>Ø¶Ø¹ <strong>Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨Ø« (RTMP)</strong> Ø£Ø¹Ù„Ø§Ù‡ ÙÙŠ ØªØ·Ø¨ÙŠÙ‚Ùƒ</li>
                <li>Ø¶Ø¹ <strong>Ù…ÙØªØ§Ø­ Ø§Ù„Ø¨Ø«</strong> Ø£Ø¹Ù„Ø§Ù‡ ÙÙŠ ØªØ·Ø¨ÙŠÙ‚Ùƒ</li>
                <li>Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¨Ø« ÙˆØ³ÙŠØ¸Ù‡Ø± Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</li>
            </ol>
        </div>

        <video id="localVideo" autoplay playsinline muted></video>
        
        <div class="controls">
            <button id="btnDevices">ğŸ” ÙØ­Øµ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†</button>
            <button id="btnTest">ğŸ¬ Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</button>
            <button id="btnWatch" onclick="window.open('https://tech-app-hpk5.onrender.com', '_blank')">
                ğŸ“º Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
            </button>
            <button id="btnAdmin" onclick="window.open('https://tech-app-hpk5.onrender.com/admin', '_blank')">
                âš™ï¸ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Owncast
            </button>
        </div>

        <div id="status">âš™ï¸ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©...</div>

        <div class="instructions">
            <h4>ğŸ”§ Ù†ØµØ§Ø¦Ø­ Ù…Ù‡Ù…Ø©:</h4>
            <ul>
                <li>ØºÙŠÙ‘Ø± <strong>Ù…ÙØªØ§Ø­ Ø§Ù„Ø¨Ø«</strong> Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (<code>/admin</code>) Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø£Ù…Ù†ÙŠØ©</li>
                <li>Ø§Ù„Ø¨Ø« Ø§Ù„ÙØ¹Ù„ÙŠ ÙŠØªÙ… Ù…Ù† <strong>ØªØ·Ø¨ÙŠÙ‚ Android</strong> ÙˆÙ„ÙŠØ³ Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©</li>
                <li>ØµÙØ­Ø© Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©: <code>https://tech-app-hpk5.onrender.com</code></li>
                <li>ÙÙŠ Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©ØŒ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙŠØ³ØªØºØ±Ù‚ 30-60 Ø«Ø§Ù†ÙŠØ© Ù„ÙŠØ¨Ø¯Ø£ Ø¹Ù†Ø¯ Ø²ÙŠØ§Ø±ØªÙ‡ Ø£ÙˆÙ„ Ù…Ø±Ø©</li>
            </ul>
        </div>

        <div class="footer">
            <p>ğŸš€ Owncast Server | Ø¥ØµØ¯Ø§Ø± 0.2.3</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const statusEl = document.getElementById('status');
            const localVideo = document.getElementById('localVideo');
            const btnDevices = document.getElementById('btnDevices');
            const btnTest = document.getElementById('btnTest');
            const streamKeyText = document.getElementById('streamKeyText');
            
            let localStream = null;

            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ù…ÙØªØ§Ø­ Ø§Ù„Ø¨Ø« Ù…Ù† localStorage Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø­ÙÙˆØ¸Ø§Ù‹
            const savedKey = localStorage.getItem('owncast_stream_key');
            if (savedKey && savedKey !== 'your_stream_key_here') {
                streamKeyText.textContent = savedKey;
            }

            // Ø¯Ø§Ù„Ø© Ù†Ø³Ø® Ø§Ù„Ù†Øµ
            window.copyToClipboard = function(text) {
                navigator.clipboard.writeText(text).then(() => {
                    showNotification('ØªÙ… Ø§Ù„Ù†Ø³Ø® Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©: ' + text.substring(0, 30) + '...');
                }).catch(err => {
                    console.error('ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®: ', err);
                });
            };

            function showNotification(message) {
                statusEl.innerHTML = `ğŸ“‹ ${message}`;
                setTimeout(() => {
                    statusEl.innerHTML = 'âš™ï¸ Ø¬Ø§Ù‡Ø²';
                }, 3000);
            }

            // 1. Ø²Ø± ÙØ­Øµ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
            btnDevices.onclick = async function() {
                try {
                    statusEl.textContent = 'ğŸ” Ø¬Ø§Ø±ÙŠ Ø·Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†...';
                    localStream = await navigator.mediaDevices.getUserMedia({ 
                        video: true, 
                        audio: true 
                    });
                    localVideo.srcObject = localStream;
                    statusEl.textContent = 'âœ… Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† Ø¬Ø§Ù‡Ø²Ø§Ù†';
                    showNotification('âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† Ø¨Ù†Ø¬Ø§Ø­');
                } catch (err) {
                    statusEl.textContent = 'âŒ ÙØ´Ù„ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø£Ø¬Ù‡Ø²Ø©';
                    showNotification(`âŒ Ø®Ø·Ø£: ${err.message}`);
                }
            };

            // 2. Ø²Ø± Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¹Ø±Ø¶
            btnTest.onclick = function() {
                if (!localStream) {
                    showNotification('âš ï¸ ÙŠØ±Ø¬Ù‰ ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø£ÙˆÙ„Ø§Ù‹');
                    return;
                }
                
                if (localVideo.style.display === 'none') {
                    localVideo.style.display = 'block';
                    showNotification('ğŸ¬ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§');
                } else {
                    localVideo.style.display = 'none';
                    showNotification('ğŸ‘ï¸ ØªÙ… Ø¥Ø®ÙØ§Ø¡ Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§');
                }
            };

            // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£ÙˆÙ„ÙŠØ©
            statusEl.textContent = 'âœ… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…';

            // Ø±Ø§Ø¨Ø· Ù„ØªØ­Ø¯ÙŠØ« Ù…ÙØªØ§Ø­ Ø§Ù„Ø¨Ø«
            const updateKeyLink = document.createElement('a');
            updateKeyLink.href = 'https://tech-app-hpk5.onrender.com/admin';
            updateKeyLink.target = '_blank';
            updateKeyLink.style.color = '#4FC3F7';
            updateKeyLink.style.marginRight = '10px';
            updateKeyLink.textContent = '(ØºÙŠÙ‘Ø± Ø§Ù„Ù…ÙØªØ§Ø­ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…)';
            
            streamKeyText.parentNode.insertBefore(updateKeyLink, streamKeyText.nextSibling);
        });
    </script>
</body>
</html>
